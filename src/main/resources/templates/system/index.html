<!DOCTYPE html>
<html>
  <head>
    <title>index</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="styles.css" type="text/css" rel="stylesheet"/>
    <link href="index/styles.css" type="text/css" rel="stylesheet"/>
    <script src="scripts/jquery-1.7.1.min.js"></script>
    <script src="scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="scripts/prototypePre.js"></script>
    <script src="document.js"></script>
    <script src="scripts/prototypePost.js"></script>
    <script src="index/data.js"></script>
    <script src="js/tracking-min.js"></script>
    <script src="js/face-min.js"></script>
    <script src="js/eye-min.js"></script>
    <script src="js/mouth-min.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>

  <body>
    <div id="base" class="">

      <!-- 总框架 (组合) -->
      <div id="u0" class="ax_default" data-left="33" data-top="22" data-width="1768" data-height="908">

        <!-- 外背框 (矩形) -->
        <div id="u1" class="ax_default box_1">
          <div id="u1_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u2" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
          </div>
        </div>

        <!-- 大标题(矩形) -->
        <div id="u3" class="ax_default label">
          <div id="u3_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u4" class="text">
            <p><span>杉德无人超市自助结账系统</span></p>
          </div>
        </div>

        <!-- 店铺名称(矩形) -->
        <div id="u5" class="ax_default label">
          <div id="u5_div" class=""></div>
          <!-- 店铺名称(矩形) -->
          <div id="u6" class="text">
            <p><span>南京紫东创意园店</span></p>
          </div>
        </div>


        <!-- 日期(矩形) -->
        <div id="u7" class="ax_default label">
          <div id="u7_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u8" class="text">
            <p><span>2018/8/23 20:52:35</span></p>
          </div>
        </div>

        <!-- 购物框 (矩形) -->
        <div id="u9" class="ax_default box_1">
          <div id="u9_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u10" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
          </div>
        </div>

        <!-- 购物车标题(矩形) -->
        <div id="u11" class="ax_default _一级标题">
          <div id="u11_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u12" class="text">
            <p><span>购物车</span></p>
          </div>
        </div>

        <!-- 购物车表格 -->
        <div id="u13" class="ax_default">

          <!-- 产品名称 (单元格) -->
          <div id="u14" class="ax_default table_cell">
            <img id="u14_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u15" class="text">
              <p><span>品名</span></p>
            </div>
          </div>

          <!-- 产品数量 (单元格) -->
          <div id="u16" class="ax_default table_cell">
            <img id="u16_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u17" class="text">
              <p><span>数量</span></p>
            </div>
          </div>

          <!-- 产品单价 (单元格) -->
          <div id="u18" class="ax_default table_cell">
            <img id="u18_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u19" class="text">
              <p><span>单价</span></p>
            </div>
          </div>

          <!-- 总价 (单元格) -->
          <div id="u20" class="ax_default table_cell">
            <img id="u20_img" class="img " src="images/index/u20.png"/>
            <!-- Unnamed () -->
            <div id="u21" class="text">
              <p><span>总价</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u22" class="ax_default table_cell">
            <img id="u22_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u23" class="text">
              <p><span>海飞丝 200ML</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u24" class="ax_default table_cell">
            <img id="u24_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u25" class="text">
              <p><span>1</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u26" class="ax_default table_cell">
            <img id="u26_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u27" class="text">
              <p><span>25</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u28" class="ax_default table_cell">
            <img id="u28_img" class="img " src="images/index/u20.png"/>
            <!-- Unnamed () -->
            <div id="u29" class="text">
              <p><span>25</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u30" class="ax_default table_cell">
            <img id="u30_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u31" class="text">
              <p><span>舒肤佳香皂</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u32" class="ax_default table_cell">
            <img id="u32_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u33" class="text">
              <p><span>3</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u34" class="ax_default table_cell">
            <img id="u34_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u35" class="text">
              <p><span>15</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u36" class="ax_default table_cell">
            <img id="u36_img" class="img " src="images/index/u20.png"/>
            <!-- Unnamed () -->
            <div id="u37" class="text">
              <p><span>45</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u38" class="ax_default table_cell">
            <img id="u38_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u39" class="text">
              <p><span>高夫洗面奶</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u40" class="ax_default table_cell">
            <img id="u40_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u41" class="text">
              <p><span>1</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u42" class="ax_default table_cell">
            <img id="u42_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u43" class="text">
              <p><span>50</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u44" class="ax_default table_cell">
            <img id="u44_img" class="img " src="images/index/u20.png"/>
            <!-- Unnamed () -->
            <div id="u45" class="text">
              <p><span>50</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u46" class="ax_default table_cell">
            <img id="u46_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u47" class="text">
              <p><span>金丝肉松饼</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u48" class="ax_default table_cell">
            <img id="u48_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u49" class="text">
              <p><span>1</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u50" class="ax_default table_cell">
            <img id="u50_img" class="img " src="images/index/u14.png"/>
            <!-- Unnamed () -->
            <div id="u51" class="text">
              <p><span>5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u52" class="ax_default table_cell">
            <img id="u52_img" class="img " src="images/index/u20.png"/>
            <!-- Unnamed () -->
            <div id="u53" class="text">
              <p><span>5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u54" class="ax_default table_cell">
            <img id="u54_img" class="img " src="images/index/u54.png"/>
            <!-- Unnamed () -->
            <div id="u55" class="text">
              <p><span>康师傅红烧牛肉面</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u56" class="ax_default table_cell">
            <img id="u56_img" class="img " src="images/index/u54.png"/>
            <!-- Unnamed () -->
            <div id="u57" class="text">
              <p><span>5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u58" class="ax_default table_cell">
            <img id="u58_img" class="img " src="images/index/u54.png"/>
            <!-- Unnamed () -->
            <div id="u59" class="text">
              <p><span>2.5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u60" class="ax_default table_cell">
            <img id="u60_img" class="img " src="images/index/u60.png"/>
            <!-- Unnamed () -->
            <div id="u61" class="text">
              <p><span>12.5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u62" class="ax_default table_cell">
            <img id="u62_img" class="img " src="images/index/u62.png"/>
            <!-- Unnamed () -->
            <div id="u63" class="text">
              <p><span>喜之郎果肉果冻</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u64" class="ax_default table_cell">
            <img id="u64_img" class="img " src="images/index/u62.png"/>
            <!-- Unnamed () -->
            <div id="u65" class="text">
              <p><span>10</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u66" class="ax_default table_cell">
            <img id="u66_img" class="img " src="images/index/u62.png"/>
            <!-- Unnamed () -->
            <div id="u67" class="text">
              <p><span>2.5</span></p>
            </div>
          </div>

          <!-- Unnamed (单元格) -->
          <div id="u68" class="ax_default table_cell">
            <img id="u68_img" class="img " src="images/index/u68.png"/>
            <!-- Unnamed () -->
            <div id="u69" class="text">
              <p><span>25</span></p>
            </div>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u70" class="ax_default label">
          <div id="u70_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u71" class="text">
            <p><span>件数：21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u72" class="ax_default label">
          <div id="u72_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u73" class="text">
            <p><span>总价：125.6</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u74" class="ax_default label">
          <div id="u74_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u75" class="text">
            <p><span>折扣：25</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u76" class="ax_default label">
          <div id="u76_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u77" class="text">
            <p><span>应付总价：</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u78" class="ax_default label">
          <div id="u78_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u79" class="text">
            <p><span>100.6</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u80" class="ax_default box_1">
          <div id="u80_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u81" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
          </div>
        </div>

        <!-- 人脸识别功能框 -->
          <div id="u82" class="container">
            <video id="video" preload autoplay loop muted></video>
            <canvas id="canvas" width="581" height="436"></canvas>
            <canvas id="canvas1" width="581" height="436"></canvas>

            <div id="img">保存图片</div>
            <div id="btn">截图</div>
            <canvas id="shortCut" width="140" height="140"></canvas>
              <script type="text/javascript">
                  var saveArray = {};
                  window.onload = function () {
                      var video = document.getElementById('video');
                      var canvas = document.getElementById('canvas');
                      var context = canvas.getContext('2d');

                      var tracker = new tracking.ObjectTracker('face');
                      tracker.setInitialScale(4);
                      tracker.setStepSize(2);
                      tracker.setEdgesDensity(0.1);

                      tracking.track('#video', tracker, {camera: true});

                      tracker.on('track', function (event) {
                          context.clearRect(0, 0, canvas.width, canvas.height);

                          event.data.forEach(function (rect) {
                              context.strokeStyle = '#fff';
                              context.strokeRect(rect.x, rect.y, rect.width, rect.height);
                              //context.font = '11px Helvetica';
                              context.fillStyle = "#fff";
                              // context.fillText('x: ' + rect.x + 'px', rect.x + rect.width + 5, rect.y + 11);
                              // context.fillText('y: ' + rect.y + 'px', rect.x + rect.width + 5, rect.y + 22);
                              //console.log(rect.x, rect.width, rect.y, rect.height);
                              saveArray.x = rect.x;
                              saveArray.y = rect.y;
                              saveArray.width = rect.width;
                              saveArray.height = rect.height;
                          });
                      });
                      setInterval(function () {
                          //console.log(saveArray);
                          if (saveArray.x > 200 &&
                              saveArray.x + saveArray.width < 400 &&
                              saveArray.y > 120 &&
                              saveArray.y + saveArray.height < 320 &&
                              saveArray.width < 180
                              && saveArray.height < 180) {
                              console.log(saveArray);
                              getPhoto();
                              for (var key in saveArray) {
                                  delete saveArray[key];
                              }
                          }
                      }, 2000);
                      function getPhoto() {
                          context2.drawImage(video, 210, 130, 210, 210, 0, 0, 140, 140); //将video对象内指定的区域捕捉绘制到画布上指定的区域，实现拍照。
                      }
                      //截图
                      var btn = document.getElementById("btn");
                      btn.onclick= function () {
                          getPhoto();
                      }
                      var canvas1 = document.getElementById('canvas1');
                      var context1 = canvas1.getContext('2d');
                      var can = document.getElementById('shortCut');
                      var context2 = can.getContext('2d');
                      context1.strokeStyle = "#69fff1";
                      context1.moveTo(190, 118);
                      context1.lineTo(390, 118);
                      context1.lineTo(390, 318);
                      context1.lineTo(190, 318);
                      context1.lineTo(190, 118);
                      context1.stroke();


                      var img = document.getElementById("img")
                      //将canvas转化为图片
                      function convertCanvasToImage(canvas) {
                          var image = new Image();
                          image.src = canvas.toDataURL("image/png");
                          return image;
                      }
                      //保存图片
                      var keepImg = document.getElementById("keepImg");
                      keepImg.onclick = function () {
                          var photoImg = document.createElement("img");
                          photoImg.src = convertCanvasToImage(can).src;
                          img.appendChild(photoImg);
                          //获取到转化为base64的图片地址
                          console.log(convertCanvasToImage(can).src);
                      }
                      //拍照
                  };
              </script>
          </div>


          <!-- Unnamed ()
          <div id="u83" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
          </div>-->


        <!-- Unnamed (矩形)-->
        <div id="u84" class="ax_default label">
          <div id="u84_div" class=""></div>
          <!-- Unnamed ()-->
          <div id="u85" class="text">
            <p><span></span></p>
          </div>
        </div>

        <!-- Unnamed (椭圆形) -->
        <div id="u86" class="ax_default ellipse">
          <img id="u86_img" class="img " src="images/index/u86.png"/>
          <!-- Unnamed () -->
          <div id="u87" class="text">
            <p><span>√</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u88" class="ax_default label">
          <div id="u88_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u89" class="text">
            <p><span>识别完成，请确认购物车信息，确认无误后请在右侧点击买单</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u90" class="ax_default _一级标题">
          <div id="u90_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u91" class="text">
            <p><span>人脸识别</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u92" class="ax_default box_1">
          <div id="u92_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u93" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u94" class="ax_default _一级标题">
          <div id="u94_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u95" class="text">
            <p><span>会员信息</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u96" class="ax_default label">
          <div id="u96_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u97" class="text">
            <p><span>姓名：陈峰</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u98" class="ax_default label">
          <div id="u98_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u99" class="text">
            <p><span>绑定的杉德卡号：251687912541</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u100" class="ax_default label">
          <div id="u100_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u101" class="text">
            <p><span>卡内余额：300元</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u102" class="ax_default label">
          <div id="u102_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u103" class="text">
            <p><span>卡状态：正常</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u104" class="ax_default label">
          <div id="u104_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u105" class="text">
            <p><span>是否支持免密支付：是</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u106" class="ax_default label">
          <div id="u106_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u107" class="text">
            <p><span>风控状态：正常</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u108" class="ax_default _一级标题">
          <div id="u108_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u109" class="text">
            <p><span>消费操作</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u110" class="ax_default label">
          <div id="u110_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u111" class="text">
            <p><span>本次消费金额：100.60</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u112" class="ax_default label">
          <div id="u112_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u113" class="text">
            <p><span>您已设置人脸识别免密支付，请再次确认左侧购物车及上方会员信息，确认无误请单击支付按钮。</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u114" class="ax_default label">
          <div id="u114_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u115" class="text">
            <p><span>卡内余额：300</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u116" class="ax_default label">
          <div id="u116_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u117" class="text">
            <p><span>消费后卡内剩余金额：199.4</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u118" class="ax_default primary_button">
          <div id="u118_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u119" class="text">
            <p><span>确认支付</span></p>
          </div>
        </div>

        <!-- Unnamed (组合) -->
        <div id="u120" class="ax_default" data-left="1603" data-top="232" data-width="124" data-height="157">

          <!-- Unnamed (矩形) -->
          <div id="u121" class="ax_default box_1">
            <div id="u121_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u122" class="text" style="display:none; visibility: hidden">
              <p><span></span></p>
            </div>
          </div>

          <!-- Unnamed (矩形) -->
          <div id="u123" class="ax_default label">
            <div id="u123_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u124" class="text">
              <p><span>数据库照片</span></p>
            </div>
          </div>

          <!-- 数据库图片 -->
          <div id="u125" class="ax_default image">
            <img id="u125_img" class="img " src="images/index/u125.png"/>
            <!-- Unnamed () -->
            <div id="u126" class="text" style="display:none; visibility: hidden">
              <p><span></span></p>
            </div>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u127" class="ax_default primary_button">
          <div id="u127_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u128" class="text">
            <p><span>杉德卡充值</span></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u129" class="ax_default primary_button">
          <div id="u129_div" class=""></div>
          <!-- Unnamed () -->
          <div id="u130" class="text">
            <p><span>放弃交易</span></p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
